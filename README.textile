h1. dm-polymorphic.

This is a fork of https://github.com/hassox/dm-polymorphic

The DM polymorphic gem mimics AR style polymorphism. This is highly experimental software; use it at your own risk.

h2. Example Usage.

<pre>
  class Comment
    include DataMapper::Resource
  
    property :id,   Serial
    property :text, String

    belongs_to :commentable, :polymorphic => true
  
    # OR use the old syntax
    #
    # is :polymorphic, :commentable
    #
  end
    
  class Post
    include DataMapper::Resource
  
    property :id, Serial
    property :name,  String  

    has n, :comments, :as => :commentable

    # OR use the old syntax
    #
    # has n, :comments, :polymorphically => :commentable   
    #
  end

  class Article
    include DataMapper::Resource
  
    property :id, Serial
    property :name,  String  

    has n, :comments, :as => :commentable

    # OR use the old syntax
    #
    # has n, :comments, :polymorphically => :commentable   
    #
  end
</pre>

This will then provide the following methods

<pre>
  Comment#commentable
  Comment#post
  Comment#article
  Post#comments
  Article#comments
</pre>

<pre>
  article = Article.create
  post = Post.create
  c1 = Comment.new
  c2 = Comment.new
  post.comments << c1
  post.save
  article.comments << c2
  article.save

  c1.commentable    # => post
  c2.commentable    # => article

  c1.post           # => post
  c1.article        # => nil

  c2.post           # => nil
  c2.article        # => article

  post.comments     # => [c1]
  article.comments  # => [c2]
</pre>